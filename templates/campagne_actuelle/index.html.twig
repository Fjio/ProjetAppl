{% extends 'base.html.twig' %}

{% block title %}Campagne de {{campagneActuelle.annee}}{% endblock %}

{% block scripts %}
  {# A changer quand bootstrap sera intégré, cf https://datatables.net/download/
  <script type="text/javascript" src="{{ asset('js/jquery-3.4.1.min.js') }}"></script>
  <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/v/dt/jq-3.3.1/dt-1.10.20/datatables.min.js"></script>
  <script type="text/javascript" src="/js/DataTables/campagneActuelle.js"></script>
  #}
{% endblock %}

{% block body %}
  <div class = "text-center">
  <h1>Campagne de {{campagneActuelle.annee}}</h1>

  <h2>Calendrier</h2>
  {% for calendrier in calendriers %}
    {{calendrier.descJalon}} : {{calendrier.date|date('d-m-Y')}}
    <br/>
  {% endfor %}

  <h2 style="margin:20px"> {{nombreDeDossiersTraites}} / {{nombreDeDossiers}} dossiers traités</h2>

  <table id="dossiersCampagne" class="table table-dark">
    <thead class="bg-info">
      <tr>
        <th>Numéro de dossier</th>
        <th>Prénom</th>
        <th>Nom</th>
        <th>Professeur en charge du dossier</th>
        <th>Traité ?</th>
        <th></th>
      </tr>
    </thead>
    <tbody>
      {% for dossier in dossiers %}
        <tr>
          {{dossier.numeroDossier}}</td>
          <td class="align-middle">{{dossier.prenomEleve}}</td>
          <td class="align-middle">{{dossier.nomEleve}}</td>
          <td class="align-middle">
            {% if (dossier.prenomProf != null) and (dossier.nomProf != null)  %}
              {{dossier.prenomProf}} {{dossier.nomProf}}
            {% else %}
              /
            {% endif %}
          </td>
          <td class="align-middle"> 
          {% if dossier.estTraite %}
            Oui
          {% else %}
            Non
          {% endif %}
          </td>
          <td class="align-middle">
            <form action="{{path('modifierDossier', {'idCampagne': dossier.idCampagne, 'idEleve': dossier.idEleve})}}" method="POST">
              <button class="btn btn-primary">Modifier</button>
            </form>
          </td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
  </div>

{% endblock %}
